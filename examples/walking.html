<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script src="js/libs/jquery-1.9.0/jquery.min.js" type="text/javascript"></script>
		<script src="js/sparkle/sparkle.js" type="text/javascript"></script>
		<script src="js/requestAnimationFrame.js" type="text/javascript"></script>
		<script src="js/stats.min.js" type="text/javascript"></script>
		<link type="text/css" rel="stylesheet" href="css/style.css" />
	</head>

	<body style="color:white;background:#000;margin:0;padding:0;">
		
		<canvas id="canvasDemo" width="1024" height="550"></canvas>
		
		<script type="text/javascript">
			
			var stats = new Stats();
			stats.setMode( 1 );
			document.body.appendChild( stats.domElement );
			
			$(function() {
				var canvas = $('#canvasDemo')[0],
					context = canvas.getContext('2d'),
					image = new Image;

				// load the flare gfx
				image.onload = function() {
					startAnimation();
				};
				image.src = 'gfx/flare.png';

				var emitter1 = new SparkleEmitter(canvas);

				emitter1.setPosition({x: 0, y: 500})
						.setMaxParticles(99999);
				
				emitter1.setParticlesPerSecond(100);
				
				emitter1.initialParticleSize = function() {
					return this.randomBetween(5, 10);
				};
				emitter1.initialParticleLifetime = function() {
					return this.randomBetween(1, 1.5);
				};

				function draw() {
					stats.begin();
					context.clearRect(0, 0, canvas.width, canvas.height);

					if (emitter1.getPosition().x > canvas.height)
						emitter1.getPosition().x = 0;

					// move the first emitter x pixel per second
					emitter1.getPosition().x += 50 * emitter1.deltaSecond;

					emitter1.fire();
					stats.end();
				}

				function startAnimation() {
					requestAnimationFrame(startAnimation,canvas);
					draw();
				}

			});


		</script>
	</body>
</html>
